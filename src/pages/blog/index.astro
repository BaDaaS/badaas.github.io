---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout title="Blog | BaDaaS" description="Technical articles from BaDaaS">
  <section class="prose" style="padding-top: 120px;">
    <h1>Blog</h1>
    <p style="color: var(--text-muted); margin-bottom: 40px;">
      Technical articles on cryptography, security, and software development.
    </p>

    {
      posts.length === 0 ? (
        <p>No posts yet. Check back soon!</p>
      ) : (
        <div class="blog-list">
          {posts.map(post => (
            <div class="blog-post-preview">
              <h3>
                <a href={`/blog/${post.slug}`}>{post.data.title}</a>
              </h3>
              <p class="date">
                {post.data.pubDate.toLocaleDateString("en-US", {
                  year: "numeric",
                  month: "long",
                  day: "numeric",
                })}
              </p>
              <p>{post.data.description}</p>
            </div>
          ))}
        </div>
      )
    }
  </section>
</BaseLayout>
